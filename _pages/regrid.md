---
permalink: /regrid/
title: "Regridding"
classes: wide
toc: true
---

### Overview
Regridding, also called remapping or interpolation, is
the process of changing the grid that underlies data values while
preserving qualities of the original data. Different kinds of
transformations are appropriate for different problems. Regridding may
be needed when communicating data between Earth system model
components such as land and atmosphere, or between different data sets
to support operations such as visualization.

Regridding can be broken into two stages. The first stage is
generation of an interpolation weight matrix that describes how points
in the source grid contribute to points in the destination grid. The
second stage is the multiplication of values on the source grid by the
interpolation weight matrix to produce values on the destination
grid. This occurs through a parallel sparse matrix multiply. ESMF can
be run so that only interpolation weights are generated, or so that
weights are both generated and applied, or so that weights that come
from some external source can be read in and applied.

### Regridding Options

#### Integrated (Online) vs. Offline

- Integrated: Integrated regridding means that interpolation weights are
generated via subroutine calls during the execution of user
code. Integrated regridding can perform the parallel sparse matrix
multiply to apply these weights to interpolate user data. The
integrated regridding can also be used to perform a sparse matrix
multiply with user provided weights.

- Offline: Offline regridding
means that interpolation weights are generated by a separate ESMF
application, not within the user code. It only requires that a user
input grid files in one of the accepted formats. The application is
called the ESMF_RegridWeightGen application.


#### Coordinate Systems

Cartesian: Sometimes used for small regional grids. Coordinates expressed in terms of distance (e.g. x,y)
Spherical: The standard spherical Earth representation. Coordinates expressed in angles. (e.g. longitude, latitude)


#### Grid Types

- Grid/logically rectangular: A grid whose points could be stored in a
rectangular index space, or a set of rectangular index spaces. Also
sometimes called a structured grid. Examples of this type of grid
include a regular latitude-longitude grid, and a cubed sphere grid.
ESMF currently supports 2D or 3D logically rectangular grids:

  - 2D: These grids consist entirely of quadrilaterals.
  - 3D: These grids consist entirely of hexahedrons.

- Mesh/unstructured: A superset of
logically rectangular grids consisting of cells with possibly
different numbers of sides connected together. An example of this is a
grid with triangular cells. ESMF currently supports 2D or 3D meshes:

  - 2D: ESMF supports meshes containing polygons with any number of sides
(e.g. triangles, quadrilaterals, pentagons,...). Polygons with more
than four sides are represented internally as a set of triangles, but
to the user should behave as if they are a single polygon.
  - 3D: ESMF supports meshes containing hexahedrons and tetrahedrons.

- LocStream/location stream: A set of disconnected points. This option
is useful for representing the locations of data where there is no
inherent structure connecting the points into cells (e.g. a set of
scattered observations). Because of the lack of cell structure,
location streams are not appropriate as the source and destination for
every regrid method.

