<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>HYCOM NUOPC Cap: HYCOM NUOPC Cap</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">HYCOM NUOPC Cap
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Types&#160;List</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">HYCOM NUOPC Cap </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#Overview">Overview</a><ul><li class="level2"><a href="#CapSubroutines">Cap Subroutines</a></li>
</ul>
</li>
<li class="level1"><a href="#UnderlyingModelInterfaces">Underlying Model Interfaces</a><ul><li class="level2"><a href="#DomainCreation">Domain Creation</a></li>
<li class="level2"><a href="#Initialization">Initialization</a></li>
<li class="level2"><a href="#Run">Run</a><ul><li class="level3"><a href="#VectorRotations">Vector Rotations</a></li>
</ul>
</li>
<li class="level2"><a href="#Finalization">Finalization</a></li>
</ul>
</li>
<li class="level1"><a href="#ModelFields">Model Fields</a><ul><li class="level2"><a href="#ImportFields">Import Fields</a></li>
<li class="level2"><a href="#ExportField">Export Fields</a></li>
<li class="level2"><a href="#MemoryManagement">Memory Management</a></li>
<li class="level2"><a href="#IO">I/O</a></li>
</ul>
</li>
<li class="level1"><a href="#BuildingAndInstalling">Building and Installing</a><ul><li class="level2"><a href="#Dependencies">Dependencies</a></li>
</ul>
</li>
<li class="level1"><a href="#RuntimeConfiguration">Runtime Configuration</a></li>
<li class="level1"><a href="#Repository"></a></li>
<li class="level1"><a href="#References"></a></li>
</ul>
</div>
<div class="textblock"><dl class="section author"><dt>Author</dt><dd>Fei Liu (<a href="#" onclick="location.href='mai'+'lto:'+'fei'+'.l'+'iu@'+'gm'+'ail'+'.c'+'om'; return false;">fei.l<span style="display: none;">.nosp@m.</span>iu@g<span style="display: none;">.nosp@m.</span>mail.<span style="display: none;">.nosp@m.</span>com</a>) </dd></dl>
<dl class="section date"><dt>Date</dt><dd>1/12/17 Original documentation</dd></dl>
<h1><a class="anchor" id="Overview"></a>
Overview</h1>
<p><b>The HYCOM cap has been tested with versions 2.2.35 and 2.2.98 of HYCOM.</b></p>
<p>This document describes the HYCOM "cap", which is a small software layer that is required when the <a href="https://hycom.org/">HYCOM ocean model</a> is used in <a href="http://www.earthsystemcog.org/projects/nuopc">National Unified Operation Prediction Capability</a> (NUOPC) coupled systems. The NUOPC Layer is a software layer built on top of the <a href="https://www.earthsystemcog.org/projects/esmf">Earth System Modeling Framework</a> (ESMF). ESMF is a high-performance modeling framework that provides data structures, interfaces, and operations suited for building coupled models from a set of components. NUOPC refines the capabilities of ESMF by providing a more precise definition of what it means for a model to be a component and how components should interact and share data in a coupled system. The NUOPC Layer software is designed to work with typical high-performance models in the Earth sciences domain, most of which are written in Fortran and are based on a distributed memory model of parallelism (MPI). A NUOPC "cap" is a Fortran module that serves as the interface to a model when it's used in a NUOPC-based coupled system. The term "cap" is used because it is a small software layer that sits on top of model code, making calls into it and exposing model data structures in a standard way. For more information about creating NUOPC caps in general, please see the <a href="http://www.earthsystemmodeling.org/esmf_releases/non_public/ESMF_7_0_0/NUOPC_howtodoc/">Building a NUOPC Model</a> how-to document.</p>
<h2><a class="anchor" id="CapSubroutines"></a>
Cap Subroutines</h2>
<p>The HYCOM cap Fortran module contains a set of subroutines that are required by NUOPC. These subroutines are called by the NUOPC infrastructure according to a predefined calling sequence. Some subroutines are called during initialization of the coupled system, some during the run of the coupled system, and some during finalization of the coupled system. The initialization sequence is the most complex and is governed by the NUOPC technical rules. Details about the initialization sequence can be found in the <a href="http://www.earthsystemmodeling.org/esmf_releases/non_public/ESMF_7_0_0/NUOPC_refdoc/node3.html#SECTION00034000000000000000">NUOPC Reference Manual</a>.</p>
<p>A particularly important part of the NUOPC intialization sequence is to establish field connections between models. Simply put, a field connection is established when a field output by one model can be consumed by another. As an example, the HYCOM model is able to accept a precipitation rate when coupled to an atmosphere model. In this case a field connection will be established between the precipitation rate exported from the atmosphere and the precipitation rate imported into the HYCOM model. Because models may uses different variable names for physical quantities, NUOPC relies on a set of standard names and a built-in, extensible standard name dictionary to match fields between models. More information about the use of standard names can be found in the <a href="http://www.earthsystemmodeling.org/esmf_releases/non_public/ESMF_7_0_0/NUOPC_refdoc/node3.html#SECTION00032000000000000000">NUOPC Reference Manual</a>.</p>
<p>Two key initialization phases that appear in every NUOPC cap, including this HYCOM cap are the field "advertise" and field "realize" phases. <em>Advertise</em> is a special NUOPC term that refers to a model participating in a coupled system providing a list of standard names of required import fields and available export fields. In other words, each model will advertise to the other models which physical fields it needs and which fields it can provide when coupled. NUOPC compares all of the advertised standard names and creates a set of unidirectional links, each from one export field in a model to one import field in another model. When these connections have been established, all models in the coupled system need to provide a description of their geographic grid (e.g., lat-lon, tri-polar, cubed sphere, etc.) and allocate their connected fields on that grid. In NUOPC terms, this is refered to as <em>realizing</em> a set of fields. NUOPC relies on ESMF data types for this, such as the <a href="http://www.earthsystemmodeling.org/esmf_releases/public/last/ESMF_refdoc/node5.html#SECTION05080000000000000000">ESMF_Grid</a> type, which describes logically rectangular grids and the <a href="http://www.earthsystemmodeling.org/esmf_releases/public/last/ESMF_refdoc/node5.html#SECTION05030000000000000000">ESMF_Field</a> type, which wraps a models data arrays and provides basic metadata. Because ESMF supports interpolation between different grids (sometimes called "regridding" or "grid remapping"), it is not necessary that models share a grid. As you will see below the <em>advertise</em> and <em>realize</em> phases each have a subroutine in the HYCOM cap.</p>
<p>The following table summarizes the NUOPC-required subroutines that appear in the HYCOM cap. The "Phase" column says whether the subroutine is called during the initialization, run, or finalize part of the coupled system run.</p>
<table class="doxtable">
<tr>
<th>Phase </th><th>HYCOM Cap Subroutine </th><th>Description  </th></tr>
<tr>
<td>Init </td><td><a class="el" href="classhycom.html#aab924c8a5c74e6026f0c3e2212f8a08a">InitializeP0</a> </td><td>Sets the Initialize Phase Definition (IPD) version to use </td></tr>
<tr>
<td>Init </td><td><a class="el" href="classhycom.html#a2ded47742d8c441f8aba40b22bde0b9b">InitializeAdvertise</a> </td><td>Advertises standard names of import and export fields </td></tr>
<tr>
<td>Init </td><td><a class="el" href="classhycom.html#a62421664b0e3e8e79fc69ea1a80b5ab6">InitializeRealize</a> </td><td>Creates an ESMF_Grid for the HYCOM grid as well as ESMF_Fields for import and export fields </td></tr>
<tr>
<td>Run </td><td><a class="el" href="classhycom.html#a5a5fa7f9e9dd3bbcc628a97366522f4c">ModelAdvance</a> </td><td>Advances the model by a timestep </td></tr>
<tr>
<td>Final </td><td><a class="el" href="classhycom.html#aa1ffe07fecb206a80e4e1fab4377786e">Finalize</a> </td><td>Cleans up </td></tr>
</table>
<h1><a class="anchor" id="UnderlyingModelInterfaces"></a>
Underlying Model Interfaces</h1>
<h2><a class="anchor" id="DomainCreation"></a>
Domain Creation</h2>
<p>The ESMF representation of the HYCOM tripolar grid is created in the subroutine <a class="el" href="classhycom__nuopc__glue.html#ab358977907b0bf176890a661b09a28f2">HYCOM_GlueInitialize</a>, which is called during the <a class="el" href="classhycom.html#a62421664b0e3e8e79fc69ea1a80b5ab6">InitializeRealize</a> NUOPC phase.</p>
<p>The grid is created in several steps:</p>
<ul>
<li>a set of local decomposition blocks is determined from HYCOM internals: (number of blocks = ijpr, min block indices = (i0+1, j0+1), max block indices = (i0+ii, j0+jja))</li>
<li>the local block decomposition information is distributed to all PETs using a call to <code>ESMF_VMAllGather</code></li>
<li>an <code>ESMF_DistGrid</code> is created over the global index space. If the "Regional" attribute is set to "true", then no periodic boundaries are set. Otherwise, for a global grid, connections are set up so that the index space is periodic in the first dimension and has a fold at the top for the bipole. In either case, the decompostion blocks are passed into the call to <code>ESMF_DistGridCreate</code></li>
<li>the following internal arrays are wrapped as <code>ESMF_Array</code>s, with appropriate halo widths set to <code>nbdy</code>: <code>plon</code>, <code>plat</code> (center coordinates), <code>ip</code> (mask), <code>scp2</code> (area)</li>
<li>an <code>ESMF_Grid</code> is then created by passing in the above <code>ESMF_DistGrid</code></li>
<li>center coordinates are set using the <code>plot</code> and <code>plat</code> arrays</li>
<li>corner coordinates are set using the <code>ulon</code> and <code>ulat</code> arrays</li>
</ul>
<h2><a class="anchor" id="Initialization"></a>
Initialization</h2>
<p>The call to the native <code>HYCOM_Init()</code> subroutine occurs in the <a class="el" href="classhycom.html#a62421664b0e3e8e79fc69ea1a80b5ab6">InitializeRealize</a> NUOPC phase. The main parameters passed are the start time and stop time (the incoming ESMF clock is translated into seconds), and the MPI communicator, which is retrieved via a call to <code>ESMF_VMGet().</code> If the "Restart" attribute is not "true" then the start time is negated, which indicates to HYCOM that it is a cold start initialization.</p>
<h2><a class="anchor" id="Run"></a>
Run</h2>
<p>The NUOPC phase responsible for advancing the model is <a class="el" href="classhycom.html#a5a5fa7f9e9dd3bbcc628a97366522f4c">ModelAdvance</a>. Before calling into the native advance subroutine, a call is made to <code>HYCOM_GlueFieldsDataImport()</code> which copies coupling fields from the import state into HYCOM native arrays. Some incoming fields have two time levels that are copied over and some unit conversions are also applied (see <a class="el" href="index.html#ImportFields">Import Fields table</a> for details on which fields are impacted.)</p>
<p>After import fields have been copied to native arrays, a call is made to <code>HYCOM_Run()</code> passing in an end time parameter based on the incoming ESMF clock. This is called is a loop until <code>end_of_run</code> or <code>end_of_run_cpl</code> is true (these are set internally by HYCOM).</p>
<p>After the run, a call is made to <code>HYCOM_GlueFieldsDataExport()</code> which copies internal fields to ESMF fields in the export state.</p>
<h3><a class="anchor" id="VectorRotations"></a>
Vector Rotations</h3>
<p>Vector rotations are applied to incoming wind stresses (from regular lat-lon to tripolar grid) and outgoing ocean currents (from tripolar to regular lat-lon). The rotation angles are provided in the native HYCOM array <code>pang</code>.</p>
<p>The rotation of wind stress from regular lat-lon to tripolar happens in <code>HYCOM_GlueFieldsImport()</code>: </p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[ \begin{bmatrix} \tau_x' \ \tau_y' \end{bmatrix} = \begin{bmatrix} cos \theta &amp; sin \theta \ -sin \theta &amp; cos \theta \\ \end{bmatrix} * \begin{bmatrix} \tau_x \ \tau_y \end{bmatrix} \]" src="form_0.png"/>
</p>
<p>The rotation of ocean current from tripolar to regular lat-lon happens in <code>HYCOM_Run()</code> in the file mod_hycom.F: </p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[ \begin{bmatrix} u' \ v' \end{bmatrix} = \begin{bmatrix} cos \theta &amp; -sin - \theta \ -sin - \theta &amp; cos \theta \end{bmatrix} * \begin{bmatrix} u \ v \end{bmatrix} \]" src="form_1.png"/>
</p>
<h2><a class="anchor" id="Finalization"></a>
Finalization</h2>
<p>The <a class="el" href="classhycom.html#aa1ffe07fecb206a80e4e1fab4377786e">Finalize</a> NUOPC phase deallocates internal state memory. There is no call to any native HYCOM finalization subroutine.</p>
<h1><a class="anchor" id="ModelFields"></a>
Model Fields</h1>
<p>The following tables list the import and export fields currently set up in the HYCOM cap.</p>
<h2><a class="anchor" id="ImportFields"></a>
Import Fields</h2>
<table class="doxtable">
<tr>
<th>Standard Name </th><th>Units </th><th>Model Variable </th><th>Description </th><th>Notes  </th></tr>
<tr>
<td>downward_sea_ice_basal_solar_heat_flux </td><td>W m-2 </td><td>fswice </td><td>solar heat flux thru ice to ocean</td><td>imported to intermediate array siqs_import </td></tr>
<tr>
<td>downward_sea_ice_basal_water_flux </td><td>kg m-2 s-1 </td><td>sflice </td><td>ice net water flux </td><td>imported to intermediate array sifw_import </td></tr>
<tr>
<td>downward_x_stress_at_sea_ice_base </td><td>Pa </td><td>si_tx </td><td>sea ice x stress </td><td>imported to intermediate array sitx_import </td></tr>
<tr>
<td>downward_y_stress_at_sea_ice_base </td><td>Pa </td><td>si_ty </td><td>sea ice y stress </td><td>imported to intermediate array sity_import </td></tr>
<tr>
<td>friction_speed </td><td>m s-1 </td><td>ustar </td><td>friction speed </td><td>imported to intermediate array imp_ustara </td></tr>
<tr>
<td>frozen_water_flux_into_sea_water </td><td>kg m-2 s-1 </td><td>riv_input </td><td>ice runoff </td><td>imported to intermediate array imp_irivers; unit conversion kg m-2 s-1 -&gt; m s-1 </td></tr>
<tr>
<td>ice_fraction </td><td>1 </td><td>covice,si_c </td><td>sea ice concentration </td><td>imported to intermediate array sic_import </td></tr>
<tr>
<td>inst_spec_humid_height2m </td><td>1 </td><td>vpmx </td><td>specific humidity </td><td>imported to intermediate array imp_vapmix </td></tr>
<tr>
<td>inst_temp_height2m </td><td>K </td><td>airt </td><td>air temperature </td><td>imported to intermediate array imp_airtmp; unit conversion K -&gt; C </td></tr>
<tr>
<td>mean_down_lw_flux </td><td>W m-2 </td><td>radfl </td><td>longwave downward flux </td><td>imported to intermediate array imp_lwdflx </td></tr>
<tr>
<td>mean_lat_flx </td><td>W m-2 </td><td>evap </td><td>latent heat flux </td><td>imported to intermediate array imp_latflx; sign reversed to comply with HYCOM convention </td></tr>
<tr>
<td>mean_net_lw_flx </td><td>W m-2 </td><td>radfl </td><td>longwave net flux </td><td>imported to intermediate array imp_lwflx </td></tr>
<tr>
<td>mean_net_sw_flx </td><td>W m-2 </td><td>swfl, radfl </td><td>shortwave net flux </td><td>imported to intermediate array imp_swflx </td></tr>
<tr>
<td>mean_prec_rate </td><td>kg m-2 s-1 </td><td>prcp </td><td>precipitation </td><td>imported to intermediate array imp_precip; unit conversion kg m-2 s-1 -&gt; m s-1 </td></tr>
<tr>
<td>mean_salt_rate </td><td></td><td>flxice </td><td>ice freezing/melting salt flux </td><td>imported to intermediate array sifs_import </td></tr>
<tr>
<td>mean_sens_flx </td><td>W m-2 </td><td>snsibl </td><td>sensible heat flux </td><td>imported to intermediate array imp_sensflx; sign reversed to comply with HYCOM convention </td></tr>
<tr>
<td>mean_up_lw_flux </td><td>W m-2 </td><td>radfl </td><td>longwave upward flux </td><td>imported to intermediate array imp_lwuflx </td></tr>
<tr>
<td>sea_ice_temperature </td><td>K </td><td>temice, si_t </td><td>sea ice temperature </td><td>imported to intermediate array sit_import </td></tr>
<tr>
<td>sea_ice_thickness </td><td>m </td><td>thkice </td><td>sea ice thickness </td><td>imported to intermediate array sih_import </td></tr>
<tr>
<td>sea_ice_x_velocity </td><td>m s-1 </td><td>si_u </td><td>sea ice x velocity </td><td>imported to intermediate array siu_import </td></tr>
<tr>
<td>sea_ice_y_velocity </td><td>m s-1 </td><td>si_v </td><td>sea ice y velocity </td><td>imported to intermediate array siv_import </td></tr>
<tr>
<td>sea_surface_temperature </td><td>K </td><td>tdif </td><td>sea surface temperature </td><td>imported to intermediate array imp_surtmp; unit conversion K -&gt; C </td></tr>
<tr>
<td>surface_downward_eastward_stress </td><td>Pa </td><td>surtx, surty </td><td>eastward stress </td><td>imported to imp_taue and <a class="el" href="index.html#VectorRotations">rotated</a> to internal grid (imp_taux and imp_tauy) </td></tr>
<tr>
<td>surface_downward_northward_stress </td><td>Pa </td><td>surtx, surty </td><td>northward stress </td><td>imported to imp_taun and <a class="el" href="index.html#VectorRotations">rotated</a> to internal grid (imp_taux and imp_tauy) </td></tr>
<tr>
<td>water_flux_into_sea_water </td><td>kg m-2 s-1 </td><td>riv_input </td><td>ocean runoff </td><td>imported to intermediate array imp_orivers; unit conversion kg m-2 s-1 -&gt; m s-1 </td></tr>
<tr>
<td>wind_speed_height10m </td><td>m s-1 </td><td>wind </td><td>wind speed </td><td>imported to intermediate array imp_wndspd </td></tr>
</table>
<h2><a class="anchor" id="ExportField"></a>
Export Fields</h2>
<table class="doxtable">
<tr>
<th>Standard Name </th><th>Units </th><th>Model Variable </th><th>Description </th><th>Notes  </th></tr>
<tr>
<td>freezing_melting_potential </td><td>W m-2 </td><td>frzh </td><td>freezing potential flux </td><td>custom computation in cap </td></tr>
<tr>
<td>mixed_layer_depth </td><td>m </td><td>dpbl </td><td>turbulent boundary layer depth </td><td>unit conversion Pa -&gt; m </td></tr>
<tr>
<td>ocean_mask </td><td></td><td>ip </td><td>mask </td><td>sea points when ip != 0 </td></tr>
<tr>
<td>ocn_current_merid </td><td>m s-1 </td><td>vmxl </td><td>northward v velocity </td><td></td></tr>
<tr>
<td>ocn_current_zonal </td><td>m s-1 </td><td>umxl </td><td>eastward u velocity </td><td></td></tr>
<tr>
<td>s_surf </td><td></td><td>sml </td><td>average salinity over coupling interval </td><td></td></tr>
<tr>
<td>sea_lev </td><td>m </td><td>sshm </td><td>average sea surface height over coupling interval </td><td>sshm converted to meters </td></tr>
<tr>
<td>sea_surface_slope_merid </td><td>m </td><td>dhde </td><td>eastward slope </td><td><a class="el" href="index.html#VectorRotations">vector rotation</a> applied to dhdx and dhdy </td></tr>
<tr>
<td>sea_surface_slope_zonal </td><td>m </td><td>dhdn </td><td>northward slope </td><td><a class="el" href="index.html#VectorRotations">vector rotation</a> applied to dhdx and dhdy </td></tr>
<tr>
<td>sea_surface_temperature </td><td>K </td><td>temp </td><td>temperature </td><td>unit conversion C -&gt; K </td></tr>
<tr>
<td>upward_sea_ice_basal_available_heat_flux </td><td>W m-2 </td><td>(multiple) </td><td></td><td>computed in cap from surface layer thickness, temperature, and salinity </td></tr>
</table>
<h2><a class="anchor" id="MemoryManagement"></a>
Memory Management</h2>
<p>During the <a class="el" href="classhycom.html#a62421664b0e3e8e79fc69ea1a80b5ab6">InitializeRealize</a> phase, ESMF allocates its own memory for the import and export fields. There are memory-to-memory copies required to move this data to and from native HYCOM arrays.</p>
<h2><a class="anchor" id="IO"></a>
I/O</h2>
<p>The cap is capable of writing out diagnostic files for each of the import and export coupling fields. To enable this feature, the "DumpFields" attribute must be set to "true". In this case, prior to the internal call to <code>HYCOM_Run()</code> NetCDF files named <code>field_ocn_import_&lt;fieldname&gt;.nc</code> will be written, and after the call to <code>HYCOM_Run()</code>, files named <code>field_ocn_export_&lt;fieldname&gt;.nc</code> will be written. These files are time series and will contain one slice of data for each time cap advance subroutine is called.</p>
<h1><a class="anchor" id="BuildingAndInstalling"></a>
Building and Installing</h1>
<h2><a class="anchor" id="Dependencies"></a>
Dependencies</h2>
<h1><a class="anchor" id="RuntimeConfiguration"></a>
Runtime Configuration</h1>
<p>The following runtime options are set with ESMF Attributes:</p>
<ul>
<li><code>Restart</code> - when set to "true", HYCOM will be asked ot read atmospheric forcing data during its initialization</li>
<li><code>Atm_init</code> - ?</li>
<li><code>DumpFields</code> - when set to "true", diagnostic NetCDF files will be written during the advance phase, one per import/export field</li>
<li><code>Regional</code> - when set to "true", HYCOM is set up in regional mode with a regional grid</li>
</ul>
<h1><a class="anchor" id="Repository"></a>
Repository</h1>
<p>The HYCOM NUOPC cap is maintained in a GitHub repository: <a href="https://github.com/feiliuesmf/hycom_cesm">https://github.com/feiliuesmf/hycom_cesm</a></p>
<h1><a class="anchor" id="References"></a>
References</h1>
<ul>
<li><a href="https://hycom.org/">HYCOM Home Page</a> </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
